@model IEnumerable<Capstone.Models.Collezioni>

@{
    ViewBag.Title = "Index";
}



<main>
    <section>
        <div class="container mb-5">
            <h2 class="display-4 text-center my-5 text-white pt-5">Collezioni</h2>
            <div class="row mb-2">
                <div class="col-md-9">
                    <div class="d-flex flex-wrap justify-content-center justify-content-md-start">
                        <button type="button" class="btn btn-custom mx-1 mx-md-2 bg-transparent mb-2" onclick="filterCollections('Tutti')">Tutti</button>
                        <button type="button" class="btn btn-custom mx-1 mx-md-2 bg-transparent mb-2" onclick="filterCollections('Arte')">Arte</button>
                        <button type="button" class="btn btn-custom mx-1 mx-md-2 bg-transparent mb-2" onclick="filterCollections('Gaming')">Gaming</button>
                        <button type="button" class="btn btn-custom mx-1 mx-md-2 bg-transparent mb-2" onclick="filterCollections('Musica')">Musica</button>
                        <button type="button" class="btn btn-custom mx-1 mx-md-2 bg-transparent mb-2" onclick="filterCollections('Fotografia')">Fotografia</button>
                    </div>
                </div>
                <div class="col-md-3 text-center text-md-end mt-3 mt-md-0">
                    <button type="button" class="btn btn-custom bg-transparent">Filtri</button>
                </div>
            </div>
            <hr class="text-white" />

            <!-- Tabella delle collezioni -->
            <div class="table-responsive">
                <table class="table table-borderless text-white">
                    <thead>
                        <tr>
                            <th>Immagine</th>
                            <th>Nome</th>
                            <th>Royalties</th>
                            <!-- Aggiungi altre colonne se necessario -->
                        </tr>
                    </thead>
                    <tbody id="collectionsTableBody">
                        <!-- Qui verranno inserite dinamicamente le righe della tabella -->
                        @foreach (var collezione in Model)
                        {
                            <tr class="vertical-center" onclick="window.location.href='@Url.Action("Details", "Collezioni", new { id = collezione.IdCollezione })'" style="cursor:pointer">
                                <td><img src="@Url.Content($"~/Content/Images/Collezioni/{collezione.FotoCollezione}")" alt="@collezione.NomeCollezione" width="70" height="70" class="rounded-4" style="object-fit:cover"></td>
                                <td>@collezione.NomeCollezione</td>
                                <td>@collezione.Royalties</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </section>
</main>

<script>
    // Funzione per filtrare le collezioni per categoria
    function filterCollections(category) {
        console.log(category); // Stampa il valore della categoria nella console del browser

        // Esegui una richiesta AJAX per ottenere le collezioni corrispondenti alla categoria selezionata
        $.ajax({
            url: '@Url.Action("GetCollectionsByCategory", "Collezioni")', // Assicurati di sostituire con il percorso corretto del tuo controller
            type: 'GET',
            data: { category: category },
            success: function (data) {
                // Aggiorna la tabella con le nuove collezioni
                $('#collectionsTableBody').html(data);
            },
            error: function (xhr, status, error) {
                // Gestisci gli errori in caso di fallimento della richiesta AJAX
                console.error(error);
            }
        });
    }
</script>





